<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Profile – V.V Maharashtra Board</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
<link href="https://fonts.googleapis.com/css2?family=Roboto+Slab:wght@400;700;800&family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">

<style>
body { margin:0; font-family:"Poppins",sans-serif; background:#f8f9ff; color:#333; transition: background .3s, color .3s; }
body.dark { background:#1e1e2f; color:#f5f5f5; }

/* ====== LOGO ====== */
.container.header-content { display:flex; align-items:center; padding:16px 24px; }
.logo { display:flex; align-items:center; gap:15px; }
.logo-circle {
  width:60px; height:60px; border-radius:50%;
  background:linear-gradient(135deg,#baa1a1 0%,#4f46e5 100%);
  display:flex; align-items:center; justify-content:center;
  box-shadow:0 4px 15px rgba(0,0,0,.3);
}
.logo-circle span {
  font-size:1.8rem; font-weight:800;
  font-family:"Roboto Slab", serif; color:#000; letter-spacing:1px;
}
.logo-text {
  font-size:2rem; font-weight:700;
  font-family:"Roboto Slab", serif; color:#301864;
}

/* PROFILE CONTAINER */
.profile-section { padding:40px 20px; display:flex; justify-content:center; }
.profile-container {
  max-width:500px; width:100%; background:#fff; padding:30px; border-radius:16px;
  box-shadow:0 8px 20px rgba(0,0,0,.1); transition:background .3s,color .3s;
}
body.dark .profile-container { background:#2b2b3c; color:#fff; }

.section-title { text-align:center; margin-bottom:25px; font-size:1.6rem; font-weight:700; }
.profile-card { text-align:center; margin-bottom:30px; }
.profile-info p { margin:8px 0; font-size:1.05rem; }

.input-field { margin:10px 0; padding:10px 12px; width:100%; border:1px solid #ccc; border-radius:8px; font-size:1rem; }
.btn { margin:8px; padding:10px 22px; border:none; border-radius:25px;
  background:linear-gradient(135deg,#4f46e5,#7c3aed); color:#fff; font-weight:600; cursor:pointer;
  display:inline-block; transition:all .3s; box-shadow:0 4px 10px rgba(0,0,0,.15); }
.btn:hover { background:linear-gradient(135deg,#6b63ff,#5b34e5); transform:translateY(-3px); }
</style>
</head>
<body>

<header>
  <div class="container header-content">
    <div class="logo">
      <div class="logo-circle"><span>V.V</span></div>
      <div class="logo-text">Maharashtra Board</div>
    </div>
  </div>
</header>

<section class="profile-section">
  <div class="profile-container">
    <h2 class="section-title">My Profile</h2>

    <div class="profile-card">
      <div class="profile-info">
        <p><strong>Email:</strong> <span id="userEmail">guest@example.com</span></p>
      </div>

      <div id="nameStdContainer"></div>
      <div id="authBtnContainer"></div>
    </div>

    <div id="editForm" style="display:none; margin-top:20px;">
      <input type="text" id="editName" placeholder="Enter Name" class="input-field">
      <input type="text" id="editStd" placeholder="Enter Standard/Class" class="input-field">
      <button class="btn" onclick="saveProfile()">Save</button>
      <button class="btn" onclick="cancelEdit()">Cancel</button>
    </div>

    <div style="text-align:center; margin-top:40px;">
      <button class="btn" onclick="goBack()">← Back</button>
      <label style="display:block; margin-top:15px; font-size:.95rem;">
        <input type="checkbox" id="darkModeToggle" onchange="toggleDarkMode()"> Dark Mode
      </label>
    </div>

  </div>
</section>

<script>
  // ===== LOGIN & PROFILE DATA =====
  const isLoggedIn = localStorage.getItem("loggedIn") === "true";
  const storedEmail = localStorage.getItem("userEmail") || "guest@example.com";
  const storedName = localStorage.getItem("userName") || "";
  const storedStd = localStorage.getItem("userStd") || "";

  document.getElementById("userEmail").innerText = storedEmail;

  const nameStdContainer = document.getElementById("nameStdContainer");
  const authBtnContainer = document.getElementById("authBtnContainer");

  if(isLoggedIn){
    if(storedName){
      // Show saved name & std with edit button
      nameStdContainer.innerHTML = `<p><strong>Name:</strong> ${storedName}</p>
                                    <p><strong>Std:</strong> ${storedStd}</p>
                                    <button class="btn" onclick="editProfile()">Edit</button>`;
      const logoutBtn = document.createElement("button");
      logoutBtn.className = "btn";
      logoutBtn.innerText = "Logout";
      logoutBtn.onclick = logoutUser;
      authBtnContainer.appendChild(logoutBtn);
    } else {
      // No name saved, show input fields directly
      document.getElementById("editForm").style.display = "block";
      const logoutBtn = document.createElement("button");
      logoutBtn.className = "btn";
      logoutBtn.innerText = "Logout";
      logoutBtn.onclick = logoutUser;
      authBtnContainer.appendChild(logoutBtn);
    }
  } else {
    // Not logged in → show login button
    const loginBtn = document.createElement("button");
    loginBtn.className = "btn";
    loginBtn.innerText = "Login";
    loginBtn.onclick = () => { window.location.href="login.html"; };
    authBtnContainer.appendChild(loginBtn);
  }

  // ===== PROFILE EDIT FUNCTIONS =====
  function editProfile(){
    document.getElementById("editForm").style.display = "block";
    document.getElementById("editName").value = storedName;
    document.getElementById("editStd").value = storedStd;
  }

  function cancelEdit(){ document.getElementById("editForm").style.display="none"; }

  function saveProfile(){
    const name = document.getElementById("editName").value.trim();
    const std = document.getElementById("editStd").value.trim();
    if(name && std){
      localStorage.setItem("userName", name);
      localStorage.setItem("userStd", std);
      alert("Profile saved!");
      window.location.reload();
    } else alert("Fill Name and Standard!");
  }

  function logoutUser(){
    localStorage.removeItem("loggedIn");
    localStorage.removeItem("userName");
    localStorage.removeItem("userStd");
    localStorage.removeItem("userEmail");
    alert("Logged out!");
    window.location.reload();
  }

  function goBack(){ window.history.back(); }

  // ===== DARK MODE =====
  const darkToggle = document.getElementById("darkModeToggle");
  if(localStorage.getItem("darkMode") === "true"){
    document.body.classList.add("dark");
    darkToggle.checked = true;
  }
  function toggleDarkMode(){
    document.body.classList.toggle("dark");
    localStorage.setItem("darkMode", document.body.classList.contains("dark"));
  }
</script>

</body>
</html>
